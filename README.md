# ECDH Multiplatform C# .Net Core

Project made to create an Encryption method that can be used in any platform (Windows, Mac and Linux).

I shared this project due to the fact that I didn't found an easy way online to create a ECDH key using a multi platform .net Core solution.

Since the CngKey solution isn't multi-platform, I used the BouncyCastle lybrary.

## Getting Started

To make a simple test, you can simply run it. It was made using .Net Core 3.0.

## Example of use

You can validade on the file `Program.cs` to keep up the examples

### New Key

To generate a new kay pair, use the `NewKey()` method, it returns an `Keys` object with 2 strings (private key and public key)

```
BouncyCastleKey.NewKey()
```

### Simetric Key

To Encrypt a message, you will need an symetric key, that is generated by a private key and a shared key.

After acquiring 2 keys, you can call the method `BouncyCastleKey.simetricKey` passing the main private key and the shared public key from the other key pair.

```
byte[] simetricKey = BouncyCastleKey.simetricKey(Key1.privateKey, Key2.publicKey);
```

After generated, use the simetric key to encrypt and decrypt a message.

### Encrypt a message

Since this encryption use an IV as a randomizer for the encryption, the generated message will always return an different hash.

You can call the `CryptographyBusiness.Cryptograph(simetricKey, message)` to encrypt the object, but it will return an `EncryptedMessage` object, with two strings (iv and encrypted text).

I made a method to return a single string called `CryptographyBusiness.EncryptedToString`, where it's used on the example bellow.

```
string message = "If you wish to make an apple pie from scratch, you must first invent the universe.";
string cript = CryptographyBusiness.EncryptedToString(CryptographyBusiness.Cryptograph(simetricKey, message));
```

### Decrypt a message

You can call the `CryptographyBusiness.Decryptograph(simetricKey, encryptedMessage)` to decrypt the object, but it need an `EncryptedMessage` object as parameter.

I made a method to convert the string into an `EncryptedMessage` object called `CryptographyBusiness.StringToEncrypted`, used in the example bellow.

```
string decript = CryptographyBusiness.Decryptograph(simetricKey, CryptographyBusiness.StringToEncrypted(cript));
```

## Files

What do you need to copy to your project, you may ask?

For simply generate the keys, in case you want to use another encryption method, you can use those files:

```
Business\BouncyCastleKey.cs
Business\CommonBusiness.cs
Entity\ExportedObjects.cs
Entity\ReadOnlyParam.cs
```

If you want to use only the encryption method (it works with other keys, even string if you use it as an byte array), use these files:

```
Business\CommonBusiness.cs
Business\CryptographyBusiness.cs
Entity\ExportedObjects.cs
Entity\ReadOnlyParam.cs
```

And, of course, if you want to use the whole solution, add these files to your project:

```
Business\BouncyCastleKey.cs
Business\CommonBusiness.cs
Business\CryptographyBusiness.cs
Entity\ExportedObjects.cs
Entity\ReadOnlyParam.cs
```

## Final notes

You may need to add the nuget package to the BouncyCastle to your project for this to work in your project

[Nuget BouncyCastle](https://www.nuget.org/packages/BouncyCastle/) - Used to make the key
